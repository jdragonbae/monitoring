<!DOCTYPE html>

<head>
    <title>Deploy-Monitoring</title>
</head>

<!--css-->
<link rel='stylesheet' type='text/css' href='style.css'>

<!--lib-->
<script src='./node_modules/jui-chart/dist/chart.js'></script>
<script src='./node_modules/jquery/dist/jquery.min.js'></script>
<script src='./node_modules/elasticsearch-browser/elasticsearch.js'></script>
<script src='./node_modules/elasticsearch-browser/elasticsearch.jquery.min.js'></script>

<!--model-->
<script src='./js/model/lineChart.js'></script>
<script src='./js/model/pieChart.js'></script>

<script>
    var client = new $.es.Client({
        hosts: 'http://106.10.41.29:9200'
    });

    client.ping({
        requestTimeout: 30000,
    }, function (error) {
        if (error) {
            console.error('elasticsearch cluster is down!');
        } else {
            console.log('All is well');
            new LineChart('cpu-jy-app002', 'doc', 'system.cpu.user.pct', 'cpuChart', 'Cpu(%)');
            new LineChart('memory-jy-app002', 'doc', 'system.memory.used.pct', 'memoryChart', 'Memory(%)');
            new PieChart('filesystem-jy-app002','doc', 'system.filesystem.used.pct','diskChart','Disk(%)');
            new LineChart('jmx-jy-app002', 'doc', 'jolokia.metrics.memory.heap_usage.used', 'jmxChart', 'Jvm Heap Memory(%)','jolokia.metrics.memory.heap_usage.max');
        }
    });
</script>

</head>

<body>
    <div id='dashboard'>
        <div id='cpuChart'>
        </div>
        <div id='memoryChart'>
        </div>
        <div id='diskChart'>
        </div>
        <div id='jmxChart'>
        </div>
    </div>
    </div>

</body>

</html>